{"version":3,"sources":["webpack:///./src/EventBus.js","webpack:///src/App.vue","webpack:///./src/App.vue?fbba","webpack:///./src/App.vue","webpack:///src/components/List.vue","webpack:///./src/components/List.vue?bd65","webpack:///./src/components/List.vue","webpack:///src/components/Cart.vue","webpack:///./src/components/Cart.vue?853b","webpack:///./src/components/Cart.vue","webpack:///./src/router/index.js","webpack:///./src/main.js"],"names":["EventBus","vue_esm","App","AddToCart","checkAll","checkAllOnly","delGoods","selectGoods","id","length","goods","alreadyIndex","quantity","stock","value","this","checkAllFlag","cart","checked","selectedNum","selectortype_template_index_0_src_App","render","_h","$createElement","_c","_self","attrs","staticRenderFns","src_App","__webpack_require__","normalizeComponent","ssrContext","List","setList","item","body","next","index","filter_index","price_isAsc","method","flag2","prop","flag1","type","components_List","_vm","staticClass","_m","_v","_l","class","tab-active","cate_index","on","click","$event","toggleCate","_s","des","filter-active","filter-price","price-down","price-up","sortBy","name","src","img","alt","_e","price","sales","addToCart","to","src_components_List","List_normalizeComponent","Cart","num","delFlag","subtotal","components_Cart","toggleDelBtn","directives","rawName","expression","selector-active","t","viewBox","version","xmlns","p-id","xmlns:xlink","width","height","d","fill","changeQty","del-box","totalPrice","src_components_Cart","Cart_normalizeComponent","use","vue_router_esm","router","routes","path","component","props","vue_resource_es2015","config","productionTip","el","template","components"],"mappings":"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","file":"static/js/app.d947d6aa801b38260b8f.js","sourcesContent":["import Vue from 'vue';\nexport const EventBus = new Vue();\n\n\n\n// WEBPACK FOOTER //\n// ./src/EventBus.js","<template>\n  <div id=\"app\">\n\n       <router-view v-bind:cart=\"cart\" v-bind:checkAllFlag=\"checkAllFlag\" v-bind:selectedNum=\"selectedNum\" />\n  </div>\n</template>\n\n<script>\nimport { EventBus } from './EventBus.js';\nexport default {\n  name: 'app',\n  data: function(){\n    return {\n      cart: [],\n      checkAllFlag: false,\n      selectedNum: 0\n    }\n  },\n  created: function() {\n      EventBus.$on('addcart', this.AddToCart)\n      EventBus.$on('checkall', this.checkAll)\n      EventBus.$on('checkallonly', this.checkAllOnly)\n      EventBus.$on('delgoods', this.delGoods)\n      EventBus.$on('selectgoods', this.selectGoods)\n  },\n  methods:{\n    AddToCart:function(goods){\n      var alreadyIndex = this.cart.findIndex(function(item, index) {\n          return item.id === goods.id;\n      });\n\n      // 如果不存在则添加\n      if (alreadyIndex === -1) {\n          var cartIndex = this.cart.length;\n          // 添加新的商品，并初始化其数量、价格、被选中状态\n          this.cart.push(goods);\n          this.$set(this.cart[cartIndex], 'quantity', 1);\n          this.$set(this.cart[cartIndex], 'subtotal', goods.price.toFixed(1));\n          this.$set(this.cart[cartIndex], 'checked', false);\n          // 新增商品，购物车不能为全选\n          this.checkAllFlag = false;\n          return;\n      }\n\n      // 如果商品已存在并且库存足够，数量加1\n      var alreadyGoods = this.cart[alreadyIndex];\n      var num = alreadyGoods.quantity,\n          stock = alreadyGoods.stock;\n\n      if (num < stock) {\n          this.$set(alreadyGoods, 'quantity', ++alreadyGoods.quantity);\n          this.$set(alreadyGoods, 'subtotal', (alreadyGoods.price * alreadyGoods.quantity).toFixed(1));\n      }\n\n    },\n    checkAllOnly: function(value){\n      this.checkAllFlag = value;\n    },\n    checkAll: function () {\n    var self = this;\n    this.checkAllFlag = !this.checkAllFlag;\n    console.log(this.checkAllFlag, \"in app.vue\")\n\n    this.cart.forEach(function (item) {\n        if (self.checkAllFlag) {\n            // 全选\n            item.checked = true;\n            self.selectedNum = self.cart.length;\n        } else {\n            // 取消全选\n            item.checked = false;\n            self.selectedNum = 0;\n        }\n    });\n  },\n  delGoods:function(){\n    var cart = this.cart;\n    this.cart = cart.filter(function(item) {\n        return !item.checked\n    });\n    this.selectedNum = 0;\n    this.checkAllFlag = false;\n  },\n  selectGoods: function(item) {\n      item.checked = !item.checked;\n      item.checked ? ++this.selectedNum : --this.selectedNum;\n      // 设置全选\n      this.selectedNum === this.cart.length ? this.checkAllFlag = true : this.checkAllFlag = false;\n  }\n  }\n}\n</script>\n\n<style scoped>\n\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('router-view',{attrs:{\"cart\":_vm.cart,\"checkAllFlag\":_vm.checkAllFlag,\"selectedNum\":_vm.selectedNum}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-389fb0cc\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-389fb0cc\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\nimport __vue_script__ from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-389fb0cc\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-389fb0cc\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = null\n// module chunks = ","<style src=\"../assets/main.css\"></style>\n<template>\n\n<div class=\"device\" id=\"page-list\">\n    <header><span class=\"header-title\">商品列表</span></header>\n    <div class=\"page\">\n        <div class=\"tab-wrap\">\n            <ul class=\"cate-tab\">\n                <li class=\"cate\" v-bind:class=\"{'tab-active': cate_index === index}\" v-for=\"(item, index) in cate\" @click=\"toggleCate(index)\">{{ item.des }}</li>\n            </ul>\n        </div>\n        <ul class=\"filter-bar\">\n            <li class=\"filter-opt\" v-bind:class=\"{'filter-active': filter_index === index, 'filter-price': item.method === 'sortPrice', 'price-down': price_isAsc, 'price-up': !price_isAsc}\" v-for=\"(item, index) in sortMethods\" @click=\"sortBy(item.method)\">{{ item.name }}</li>\n        </ul>\n        <ul class=\"goods-list\">\n            <li class=\"goods-item\" v-for=\"(item, index) in list\">\n                <div class=\"goods-img\">\n                    <img v-bind:src=\"item.img\" v-bind:alt=\"item.name\">\n                    <div class=\"flag\" v-if=\"item.ishot\">热</div>\n                </div>\n                <div class=\"goods-info\">\n                    <p class=\"goods-title\">{{ item.name }}</p>\n                    <div class=\"goods-price\">\n                        <span>¥<b>{{ item.price }}</b></span>\n                    </div>\n                    <span class=\"des\">{{ item.sales }}人付款</span>\n                    <span class=\"save\" @click=\"addToCart(item)\">+</span>\n                </div>\n            </li>\n        </ul>\n        <div class=\"action-bar\">\n            <router-link to=\"/Cart\">\n                <div class=\"action-btn buy-btn\">查看购物车({{cart.length}})</div>\n            </router-link>\n        </div>\n    </div>\n</div>\n\n</template>\n\n<script>\n\nimport vueresource from 'vue-resource'\nimport { EventBus } from '../EventBus.js';\n\n\nexport default {\n    name: 'List',\n    data() {\n        return {\n            cate_index: 0, // 当前分类项下标\n            filter_index: 0, // 当前条件筛选项下标\n            price_isAsc: false, // 价格是否升序\n            selectedNumber: 0,\n            cate: [{\n                id: 0,\n                des: '推荐'\n            }, {\n                id: 1,\n                des: '母婴'\n            }, {\n                id: 2,\n                des: '鞋包饰品'\n            }, {\n                id: 3,\n                des: '食品'\n            }, {\n                id: 4,\n                des: '数码家电'\n            }, {\n                id: 5,\n                des: '居家百货'\n            }],\n            sortMethods: [{\n                name: '综合排序',\n                method: 'setList'\n            }, {\n                name: '销量优先',\n                method: 'sortSales'\n            }, {\n                name: '价格',\n                method: 'sortPrice'\n            }],\n            goods: [],\n            list: []\n        }\n    },\n    props: ['cart', 'checkAllFlagGlocal'],\n    created: function() {\n        this.loadData(this.setList);\n    },\n    mounted: function() {\n    },\n    methods: {\n        /**\n         * @method 设置商品列表\n         */\n        setList: function() {\n            var self = this;\n            this.list = this.goods.filter(function(item) {\n                return self.cate_index !== 0 ? item.type === self.cate_index : item\n            });\n\n        },\n\n        loadData: function(next) {\n            var self = this;\n\n            this.$http.get('static/data/goods.json').then(response => {\n                // get body data\n                self.goods = response.body;\n                next();\n            }, response => {\n                next();\n                // error callback\n            });\n        },\n\n        /**\n         * @method 切换分类\n         * @param {Number} index 需要切换类目的数组下标\n         */\n        toggleCate: function(index) {\n            this.cate_index = index;\n            // 分类操作\n            this.setList();\n            // 价格排序状态保持不变\n            var filterIndex = this.filter_index;\n            (filterIndex === 2) && (this.price_isAsc = !this.price_isAsc);\n            // 商品排序\n            this.sortBy(this.sortMethods[filterIndex].method);\n        },\n\n        /**\n         * 根据属性值进行升序或降序的比较器\n         *\n         * @method 属性比较器\n         * @param {String} prop 属性名\n         * @param {String} type 排序方法 (desc: 降序, asc: 升序)\n         */\n        compare: function(prop, type) {\n            type = type || 'desc';\n\n            var flag1, flag2;\n            if (type === 'desc') {\n                flag1 = -1;\n                flag2 = 1;\n            } else if (type === 'asc') {\n                flag1 = 1;\n                flag2 = -1;\n            }\n\n            return function(obj1, obj2) {\n                var val1 = obj1[prop],\n                    val2 = obj2[prop];\n\n                if (val2 < val1) {\n                    return flag1;\n                } else if (val2 > val1) {\n                    return flag2;\n                } else {\n                    return 0;\n                }\n            }\n        },\n\n        /**\n         * @method 按销量排序\n         */\n        sortSales: function() {\n            this.list.sort(this.compare('sales'));\n        },\n\n        /**\n         * @method 按价格排序\n         */\n        sortPrice: function() {\n            var type = this.price_isAsc ? 'desc' : 'asc';\n            this.list.sort(this.compare('price', type));\n            this.price_isAsc = !this.price_isAsc;\n        },\n\n        /**\n         * @method 排序调度器\n         * @param {String} method 方法名\n         */\n        sortBy: function(method) {\n            this.filter_index = this.sortMethods.findIndex(function(item) {\n                return item.method === method;\n            });\n            method = method || 'setList';\n            method !== 'sortPrice' && (this.price_isAsc = false);\n            this[method]();\n        },\n\n        addToCart: function(goods) {\n            EventBus.$emit('addcart', goods);\n            EventBus.$emit('checkallonly', false);\n        }\n    }\n}\n\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/components/List.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"device\",attrs:{\"id\":\"page-list\"}},[_vm._m(0),_vm._v(\" \"),_c('div',{staticClass:\"page\"},[_c('div',{staticClass:\"tab-wrap\"},[_c('ul',{staticClass:\"cate-tab\"},_vm._l((_vm.cate),function(item,index){return _c('li',{staticClass:\"cate\",class:{'tab-active': _vm.cate_index === index},on:{\"click\":function($event){_vm.toggleCate(index)}}},[_vm._v(_vm._s(item.des))])}))]),_vm._v(\" \"),_c('ul',{staticClass:\"filter-bar\"},_vm._l((_vm.sortMethods),function(item,index){return _c('li',{staticClass:\"filter-opt\",class:{'filter-active': _vm.filter_index === index, 'filter-price': item.method === 'sortPrice', 'price-down': _vm.price_isAsc, 'price-up': !_vm.price_isAsc},on:{\"click\":function($event){_vm.sortBy(item.method)}}},[_vm._v(_vm._s(item.name))])})),_vm._v(\" \"),_c('ul',{staticClass:\"goods-list\"},_vm._l((_vm.list),function(item,index){return _c('li',{staticClass:\"goods-item\"},[_c('div',{staticClass:\"goods-img\"},[_c('img',{attrs:{\"src\":item.img,\"alt\":item.name}}),_vm._v(\" \"),(item.ishot)?_c('div',{staticClass:\"flag\"},[_vm._v(\"热\")]):_vm._e()]),_vm._v(\" \"),_c('div',{staticClass:\"goods-info\"},[_c('p',{staticClass:\"goods-title\"},[_vm._v(_vm._s(item.name))]),_vm._v(\" \"),_c('div',{staticClass:\"goods-price\"},[_c('span',[_vm._v(\"¥\"),_c('b',[_vm._v(_vm._s(item.price))])])]),_vm._v(\" \"),_c('span',{staticClass:\"des\"},[_vm._v(_vm._s(item.sales)+\"人付款\")]),_vm._v(\" \"),_c('span',{staticClass:\"save\",on:{\"click\":function($event){_vm.addToCart(item)}}},[_vm._v(\"+\")])])])})),_vm._v(\" \"),_c('div',{staticClass:\"action-bar\"},[_c('router-link',{attrs:{\"to\":\"/Cart\"}},[_c('div',{staticClass:\"action-btn buy-btn\"},[_vm._v(\"查看购物车(\"+_vm._s(_vm.cart.length)+\")\")])])],1)])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('header',[_c('span',{staticClass:\"header-title\"},[_vm._v(\"商品列表\")])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-52d4d238\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/List.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-52d4d238\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../assets/main.css\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./List.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./List.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-52d4d238\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./List.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/List.vue\n// module id = null\n// module chunks = ","<style src=\"../assets/main.css\"></style>\n<template>\n\n<div class=\"device\" id=\"page-cart\">\n    <header>\n        <span class=\"header-back\"><router-link to=\"/\">返回</router-link> </span>\n        <span class=\"header-title\">购物清单</span>\n        <span class=\"header-edit\" @click=\"toggleDelBtn\">\n              <span v-show=\"!delFlag\">编辑</span>\n        <span v-show=\"delFlag\">完成</span>\n        </span>\n    </header>\n    <div class=\"page\">\n        <div class=\"empty-states\" v-if=\"cart.length === 0\">\n            <span>这里是空的，快去逛逛吧</span>\n        </div>\n        <ul class=\"goods-list cart-list\" v-else>\n\n            <li class=\"goods-item\" v-for=\"(item, index) in cart\">\n                <div class=\"item-selector\">\n                    <div class=\"icon-selector\" v-bind:class=\"{'selector-active': item.checked}\" @click=\"selectGoods(item)\">\n                        <svg t=\"1504061791962\" class=\"icon\" style=\"\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"2922\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"12\" height=\"12\">\n                            <path d=\"M908.288 127.488l-537.6 537.6-254.976-254.976L0 525.824l254.976 254.976 115.712 115.712L486.4 780.8l537.6-537.6z\" fill=\"#ffffff\" p-id=\"2923\"></path>\n                        </svg>\n                    </div>\n                </div>\n                <div class=\"goods-img\">\n                    <img v-bind:src=\"item.img\" v-bind:alt=\"item.name\">\n                </div>\n                <div class=\"goods-info\">\n                    <p class=\"goods-title\">{{ item.name }}</p>\n                    <div class=\"goods-price\">\n                        <span>¥<b>{{ item.price }}</b></span>\n                    </div>\n                    <span class=\"des\">库存{{ item.stock }}件</span>\n                    <div class=\"goods-num\">\n                        <div class=\"num-btn\" @click=\"changeQty(true, item)\">+</div>\n                        <div class=\"show-num\">{{ item.quantity }}</div>\n                        <div class=\"num-btn\" @click=\"changeQty(false, item)\">-</div>\n                    </div>\n                </div>\n            </li>\n        </ul>\n\n    </div>\n    <div class=\"action-bar\" v-bind:class=\"{ 'del-box': delFlag }\">\n        <!-- del-box -->\n        <div class=\"g-selector\" @click=\"checkAll\">\n            <div class=\"item-selector\">\n                <div class=\"icon-selector\" v-bind:class=\"{'selector-active': checkAllFlag}\">\n                    <svg t=\"1504061791962\" class=\"icon\" style=\"\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"2922\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"12\" height=\"12\">\n                        <path d=\"M908.288 127.488l-537.6 537.6-254.976-254.976L0 525.824l254.976 254.976 115.712 115.712L486.4 780.8l537.6-537.6z\" fill=\"#ffffff\" p-id=\"2923\"></path>\n                    </svg>\n                </div>\n            </div>\n            <span>全选</span>\n        </div>\n        <div class=\"action-btn buy-btn\">去结算({{ selectedNum }})</div>\n        <div class=\"action-btn del-btn\" @click=\"delGoods\">删除({{ selectedNum }})</div>\n        <div class=\"total\">合计：<span>¥<b>{{ totalPrice }}</b></span></div>\n    </div>\n</div>\n</div>\n\n</template>\n\n<script>\nimport { EventBus } from '../EventBus.js';\nexport default {\n    name: 'Cart',\n    props: ['cart', 'checkAllFlag', 'selectedNum'],\n    data() {\n        return {\n            delFlag: false,\n            // cart: [{\n            //     id: 1001,\n            //     name: 'Beats EP头戴式耳机',\n            //     price: 558,\n            //     type: 4,\n            //     quantity: 1,\n            //     subtotal: 558,\n            //     stock: 128,\n            //     checked: false,\n            //     sales: 1872,\n            //     img: 'http://img11.360buyimg.com/n1/s528x528_jfs/t3109/194/2435573156/46587/e0e867ac/57e10978N87220944.jpg!q70.jpg'\n            // }]\n            // cart: []\n        }\n    },\n    methods: {\n\n        /**\n         * @method 增减单品数量\n         * @param {Boolean} isAdd 是否增加\n         * @param {Number} index 商品下标\n         */\n        changeQty: function(isAdd, item) {\n            var num = item.quantity,\n                stock = item.stock;\n\n            if (isAdd && num < stock) {\n                this.$set(item, 'quantity', ++num);\n            } else if (!isAdd && num > 1) {\n                this.$set(item, 'quantity', --num);\n            }\n\n            this.$set(item, 'subtotal', (item.price * num).toFixed(1));\n        },\n\n        /**\n         * @method 选择商品\n         * @param {Object} item 商品对象\n         */\n        selectGoods: function(item) {\n            EventBus.$emit('selectgoods', item);\n        },\n\n        /**\n         * @method 全选\n         */\n        checkAll: function() {\n            EventBus.$emit('checkall');\n\n        },\n\n        /**\n         * @method 切换删除按钮\n         */\n        toggleDelBtn: function() {\n            this.delFlag = !this.delFlag;\n        },\n\n        /**\n         * @method 删除商品\n         */\n        delGoods: function() {\n            /**\n             * !提示：\n             * 每次遍历删除数组元素时，会减少数组长度，所以不能缓存length\n             * 也不能用forEach方法，因为它会自动缓存数组的长度\n             * 这里还可以用filter\n             */\n           EventBus.$emit('delgoods');\n            // for (var i = 0; i < cart.length; i++) {\n            //     cart[i].checked && cart.splice(i--, 1);\n            // };\n\n            // 重置 被选商品数量、全选状态、删除状态\n\n            this.delFlag = !this.delFlag;\n        }\n\n    },\n    computed: {\n        /**\n         * @method 已选商品的总额\n         */\n        totalPrice: function() {\n            var num = 0;\n            this.cart.forEach(function(item) {\n                item.checked && (num += parseFloat(item.subtotal));\n            });\n            return num;\n        }\n    }\n\n}\n\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/components/Cart.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"device\",attrs:{\"id\":\"page-cart\"}},[_c('header',[_c('span',{staticClass:\"header-back\"},[_c('router-link',{attrs:{\"to\":\"/\"}},[_vm._v(\"返回\")])],1),_vm._v(\" \"),_c('span',{staticClass:\"header-title\"},[_vm._v(\"购物清单\")]),_vm._v(\" \"),_c('span',{staticClass:\"header-edit\",on:{\"click\":_vm.toggleDelBtn}},[_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.delFlag),expression:\"!delFlag\"}]},[_vm._v(\"编辑\")]),_vm._v(\" \"),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.delFlag),expression:\"delFlag\"}]},[_vm._v(\"完成\")])])]),_vm._v(\" \"),_c('div',{staticClass:\"page\"},[(_vm.cart.length === 0)?_c('div',{staticClass:\"empty-states\"},[_c('span',[_vm._v(\"这里是空的，快去逛逛吧\")])]):_c('ul',{staticClass:\"goods-list cart-list\"},_vm._l((_vm.cart),function(item,index){return _c('li',{staticClass:\"goods-item\"},[_c('div',{staticClass:\"item-selector\"},[_c('div',{staticClass:\"icon-selector\",class:{'selector-active': item.checked},on:{\"click\":function($event){_vm.selectGoods(item)}}},[_c('svg',{staticClass:\"icon\",attrs:{\"t\":\"1504061791962\",\"viewBox\":\"0 0 1024 1024\",\"version\":\"1.1\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"p-id\":\"2922\",\"xmlns:xlink\":\"http://www.w3.org/1999/xlink\",\"width\":\"12\",\"height\":\"12\"}},[_c('path',{attrs:{\"d\":\"M908.288 127.488l-537.6 537.6-254.976-254.976L0 525.824l254.976 254.976 115.712 115.712L486.4 780.8l537.6-537.6z\",\"fill\":\"#ffffff\",\"p-id\":\"2923\"}})])])]),_vm._v(\" \"),_c('div',{staticClass:\"goods-img\"},[_c('img',{attrs:{\"src\":item.img,\"alt\":item.name}})]),_vm._v(\" \"),_c('div',{staticClass:\"goods-info\"},[_c('p',{staticClass:\"goods-title\"},[_vm._v(_vm._s(item.name))]),_vm._v(\" \"),_c('div',{staticClass:\"goods-price\"},[_c('span',[_vm._v(\"¥\"),_c('b',[_vm._v(_vm._s(item.price))])])]),_vm._v(\" \"),_c('span',{staticClass:\"des\"},[_vm._v(\"库存\"+_vm._s(item.stock)+\"件\")]),_vm._v(\" \"),_c('div',{staticClass:\"goods-num\"},[_c('div',{staticClass:\"num-btn\",on:{\"click\":function($event){_vm.changeQty(true, item)}}},[_vm._v(\"+\")]),_vm._v(\" \"),_c('div',{staticClass:\"show-num\"},[_vm._v(_vm._s(item.quantity))]),_vm._v(\" \"),_c('div',{staticClass:\"num-btn\",on:{\"click\":function($event){_vm.changeQty(false, item)}}},[_vm._v(\"-\")])])])])}))]),_vm._v(\" \"),_c('div',{staticClass:\"action-bar\",class:{ 'del-box': _vm.delFlag }},[_c('div',{staticClass:\"g-selector\",on:{\"click\":_vm.checkAll}},[_c('div',{staticClass:\"item-selector\"},[_c('div',{staticClass:\"icon-selector\",class:{'selector-active': _vm.checkAllFlag}},[_c('svg',{staticClass:\"icon\",attrs:{\"t\":\"1504061791962\",\"viewBox\":\"0 0 1024 1024\",\"version\":\"1.1\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"p-id\":\"2922\",\"xmlns:xlink\":\"http://www.w3.org/1999/xlink\",\"width\":\"12\",\"height\":\"12\"}},[_c('path',{attrs:{\"d\":\"M908.288 127.488l-537.6 537.6-254.976-254.976L0 525.824l254.976 254.976 115.712 115.712L486.4 780.8l537.6-537.6z\",\"fill\":\"#ffffff\",\"p-id\":\"2923\"}})])])]),_vm._v(\" \"),_c('span',[_vm._v(\"全选\")])]),_vm._v(\" \"),_c('div',{staticClass:\"action-btn buy-btn\"},[_vm._v(\"去结算(\"+_vm._s(_vm.selectedNum)+\")\")]),_vm._v(\" \"),_c('div',{staticClass:\"action-btn del-btn\",on:{\"click\":_vm.delGoods}},[_vm._v(\"删除(\"+_vm._s(_vm.selectedNum)+\")\")]),_vm._v(\" \"),_c('div',{staticClass:\"total\"},[_vm._v(\"合计：\"),_c('span',[_vm._v(\"¥\"),_c('b',[_vm._v(_vm._s(_vm.totalPrice))])])])])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-8e715c24\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Cart.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-8e715c24\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../assets/main.css\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Cart.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Cart.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-8e715c24\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Cart.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Cart.vue\n// module id = null\n// module chunks = ","import Vue from 'vue'\nimport Router from 'vue-router'\nimport List from '@/components/List'\nimport Cart from '@/components/Cart'\n\nVue.use(Router)\n\nexport default new Router({\n  routes: [\n    {\n      path: '/',\n      name: 'List',\n      component: List,\n      props: true\n    },\n    {\n      path: '/Cart',\n      name: 'Cart',\n      component: Cart,\n      props: true\n    }\n  ]\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/router/index.js","// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\nimport Vue from 'vue'\nimport App from './App'\nimport router from './router'\nimport VueResource from 'vue-resource'\nVue.use(VueResource)\n\nVue.config.productionTip = false\n\n/* eslint-disable no-new */\nnew Vue({\n  el: '#app',\n  router,\n  template: '<App/>',\n  components: { App }\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js"],"sourceRoot":""}