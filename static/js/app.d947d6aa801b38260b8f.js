webpackJsonp([1],{"+ZAA":function(t,s){},0:function(t,s){},NHnr:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i=e("7+uW"),c=new i.a,a={name:"app",data:function(){return{cart:[],checkAllFlag:!1,selectedNum:0}},created:function(){c.$on("addcart",this.AddToCart),c.$on("checkall",this.checkAll),c.$on("checkallonly",this.checkAllOnly),c.$on("delgoods",this.delGoods),c.$on("selectgoods",this.selectGoods)},methods:{AddToCart:function(t){var s=this.cart.findIndex(function(s,e){return s.id===t.id});if(-1===s){var e=this.cart.length;return this.cart.push(t),this.$set(this.cart[e],"quantity",1),this.$set(this.cart[e],"subtotal",t.price.toFixed(1)),this.$set(this.cart[e],"checked",!1),void(this.checkAllFlag=!1)}var i=this.cart[s];i.quantity<i.stock&&(this.$set(i,"quantity",++i.quantity),this.$set(i,"subtotal",(i.price*i.quantity).toFixed(1)))},checkAllOnly:function(t){this.checkAllFlag=t},checkAll:function(){var t=this;this.checkAllFlag=!this.checkAllFlag,console.log(this.checkAllFlag,"in app.vue"),this.cart.forEach(function(s){t.checkAllFlag?(s.checked=!0,t.selectedNum=t.cart.length):(s.checked=!1,t.selectedNum=0)})},delGoods:function(){var t=this.cart;this.cart=t.filter(function(t){return!t.checked}),this.selectedNum=0,this.checkAllFlag=!1},selectGoods:function(t){t.checked=!t.checked,t.checked?++this.selectedNum:--this.selectedNum,this.selectedNum===this.cart.length?this.checkAllFlag=!0:this.checkAllFlag=!1}}},l={render:function(){var t=this.$createElement,s=this._self._c||t;return s("div",{attrs:{id:"app"}},[s("router-view",{attrs:{cart:this.cart,checkAllFlag:this.checkAllFlag,selectedNum:this.selectedNum}})],1)},staticRenderFns:[]},n=e("VU/8")(a,l,!1,function(t){e("k2Tv")},"data-v-389fb0cc",null).exports,o=e("/ocq"),r=e("ORbq"),d={name:"List",data:function(){return{cate_index:0,filter_index:0,price_isAsc:!1,selectedNumber:0,cate:[{id:0,des:"推荐"},{id:1,des:"母婴"},{id:2,des:"鞋包饰品"},{id:3,des:"食品"},{id:4,des:"数码家电"},{id:5,des:"居家百货"}],sortMethods:[{name:"综合排序",method:"setList"},{name:"销量优先",method:"sortSales"},{name:"价格",method:"sortPrice"}],goods:[],list:[]}},props:["cart","checkAllFlagGlocal"],created:function(){this.loadData(this.setList)},mounted:function(){},methods:{setList:function(){var t=this;this.list=this.goods.filter(function(s){return 0!==t.cate_index?s.type===t.cate_index:s})},loadData:function(t){var s=this;this.$http.get("static/data/goods.json").then(function(e){s.goods=e.body,t()},function(s){t()})},toggleCate:function(t){this.cate_index=t,this.setList();var s=this.filter_index;2===s&&(this.price_isAsc=!this.price_isAsc),this.sortBy(this.sortMethods[s].method)},compare:function(t,s){var e,i;return"desc"===(s=s||"desc")?(e=-1,i=1):"asc"===s&&(e=1,i=-1),function(s,c){var a=s[t],l=c[t];return l<a?e:l>a?i:0}},sortSales:function(){this.list.sort(this.compare("sales"))},sortPrice:function(){var t=this.price_isAsc?"desc":"asc";this.list.sort(this.compare("price",t)),this.price_isAsc=!this.price_isAsc},sortBy:function(t){this.filter_index=this.sortMethods.findIndex(function(s){return s.method===t}),"sortPrice"!==(t=t||"setList")&&(this.price_isAsc=!1),this[t]()},addToCart:function(t){c.$emit("addcart",t),c.$emit("checkallonly",!1)}}},h={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"device",attrs:{id:"page-list"}},[t._m(0),t._v(" "),e("div",{staticClass:"page"},[e("div",{staticClass:"tab-wrap"},[e("ul",{staticClass:"cate-tab"},t._l(t.cate,function(s,i){return e("li",{staticClass:"cate",class:{"tab-active":t.cate_index===i},on:{click:function(s){t.toggleCate(i)}}},[t._v(t._s(s.des))])}))]),t._v(" "),e("ul",{staticClass:"filter-bar"},t._l(t.sortMethods,function(s,i){return e("li",{staticClass:"filter-opt",class:{"filter-active":t.filter_index===i,"filter-price":"sortPrice"===s.method,"price-down":t.price_isAsc,"price-up":!t.price_isAsc},on:{click:function(e){t.sortBy(s.method)}}},[t._v(t._s(s.name))])})),t._v(" "),e("ul",{staticClass:"goods-list"},t._l(t.list,function(s,i){return e("li",{staticClass:"goods-item"},[e("div",{staticClass:"goods-img"},[e("img",{attrs:{src:s.img,alt:s.name}}),t._v(" "),s.ishot?e("div",{staticClass:"flag"},[t._v("热")]):t._e()]),t._v(" "),e("div",{staticClass:"goods-info"},[e("p",{staticClass:"goods-title"},[t._v(t._s(s.name))]),t._v(" "),e("div",{staticClass:"goods-price"},[e("span",[t._v("¥"),e("b",[t._v(t._s(s.price))])])]),t._v(" "),e("span",{staticClass:"des"},[t._v(t._s(s.sales)+"人付款")]),t._v(" "),e("span",{staticClass:"save",on:{click:function(e){t.addToCart(s)}}},[t._v("+")])])])})),t._v(" "),e("div",{staticClass:"action-bar"},[e("router-link",{attrs:{to:"/Cart"}},[e("div",{staticClass:"action-btn buy-btn"},[t._v("查看购物车("+t._s(t.cart.length)+")")])])],1)])])},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("header",[s("span",{staticClass:"header-title"},[this._v("商品列表")])])}]},u=e("VU/8")(d,h,!1,function(t){e("+ZAA")},null,null).exports,v={name:"Cart",props:["cart","checkAllFlag","selectedNum"],data:function(){return{delFlag:!1}},methods:{changeQty:function(t,s){var e=s.quantity,i=s.stock;t&&e<i?this.$set(s,"quantity",++e):!t&&e>1&&this.$set(s,"quantity",--e),this.$set(s,"subtotal",(s.price*e).toFixed(1))},selectGoods:function(t){c.$emit("selectgoods",t)},checkAll:function(){c.$emit("checkall")},toggleDelBtn:function(){this.delFlag=!this.delFlag},delGoods:function(){c.$emit("delgoods"),this.delFlag=!this.delFlag}},computed:{totalPrice:function(){var t=0;return this.cart.forEach(function(s){s.checked&&(t+=parseFloat(s.subtotal))}),t}}},_={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"device",attrs:{id:"page-cart"}},[e("header",[e("span",{staticClass:"header-back"},[e("router-link",{attrs:{to:"/"}},[t._v("返回")])],1),t._v(" "),e("span",{staticClass:"header-title"},[t._v("购物清单")]),t._v(" "),e("span",{staticClass:"header-edit",on:{click:t.toggleDelBtn}},[e("span",{directives:[{name:"show",rawName:"v-show",value:!t.delFlag,expression:"!delFlag"}]},[t._v("编辑")]),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:t.delFlag,expression:"delFlag"}]},[t._v("完成")])])]),t._v(" "),e("div",{staticClass:"page"},[0===t.cart.length?e("div",{staticClass:"empty-states"},[e("span",[t._v("这里是空的，快去逛逛吧")])]):e("ul",{staticClass:"goods-list cart-list"},t._l(t.cart,function(s,i){return e("li",{staticClass:"goods-item"},[e("div",{staticClass:"item-selector"},[e("div",{staticClass:"icon-selector",class:{"selector-active":s.checked},on:{click:function(e){t.selectGoods(s)}}},[e("svg",{staticClass:"icon",attrs:{t:"1504061791962",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2922","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"12",height:"12"}},[e("path",{attrs:{d:"M908.288 127.488l-537.6 537.6-254.976-254.976L0 525.824l254.976 254.976 115.712 115.712L486.4 780.8l537.6-537.6z",fill:"#ffffff","p-id":"2923"}})])])]),t._v(" "),e("div",{staticClass:"goods-img"},[e("img",{attrs:{src:s.img,alt:s.name}})]),t._v(" "),e("div",{staticClass:"goods-info"},[e("p",{staticClass:"goods-title"},[t._v(t._s(s.name))]),t._v(" "),e("div",{staticClass:"goods-price"},[e("span",[t._v("¥"),e("b",[t._v(t._s(s.price))])])]),t._v(" "),e("span",{staticClass:"des"},[t._v("库存"+t._s(s.stock)+"件")]),t._v(" "),e("div",{staticClass:"goods-num"},[e("div",{staticClass:"num-btn",on:{click:function(e){t.changeQty(!0,s)}}},[t._v("+")]),t._v(" "),e("div",{staticClass:"show-num"},[t._v(t._s(s.quantity))]),t._v(" "),e("div",{staticClass:"num-btn",on:{click:function(e){t.changeQty(!1,s)}}},[t._v("-")])])])])}))]),t._v(" "),e("div",{staticClass:"action-bar",class:{"del-box":t.delFlag}},[e("div",{staticClass:"g-selector",on:{click:t.checkAll}},[e("div",{staticClass:"item-selector"},[e("div",{staticClass:"icon-selector",class:{"selector-active":t.checkAllFlag}},[e("svg",{staticClass:"icon",attrs:{t:"1504061791962",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2922","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"12",height:"12"}},[e("path",{attrs:{d:"M908.288 127.488l-537.6 537.6-254.976-254.976L0 525.824l254.976 254.976 115.712 115.712L486.4 780.8l537.6-537.6z",fill:"#ffffff","p-id":"2923"}})])])]),t._v(" "),e("span",[t._v("全选")])]),t._v(" "),e("div",{staticClass:"action-btn buy-btn"},[t._v("去结算("+t._s(t.selectedNum)+")")]),t._v(" "),e("div",{staticClass:"action-btn del-btn",on:{click:t.delGoods}},[t._v("删除("+t._s(t.selectedNum)+")")]),t._v(" "),e("div",{staticClass:"total"},[t._v("合计："),e("span",[t._v("¥"),e("b",[t._v(t._s(t.totalPrice))])])])])])},staticRenderFns:[]},p=e("VU/8")(v,_,!1,function(t){e("bXlA")},null,null).exports;i.a.use(o.a);var f=new o.a({routes:[{path:"/",name:"List",component:u,props:!0},{path:"/Cart",name:"Cart",component:p,props:!0}]});i.a.use(r.a),i.a.config.productionTip=!1,new i.a({el:"#app",router:f,template:"<App/>",components:{App:n}})},bXlA:function(t,s){},k2Tv:function(t,s){}},["NHnr"]);
//# sourceMappingURL=app.d947d6aa801b38260b8f.js.map